# Социальная сеть для путешественников - System Design

## Постановка задачи
У бизнеса есть четкое понимание функциональности, которая эта социальная сеть должна будет предоставлять в будущем:
- публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
- оценка и комментарии постов других путешественников;
- подписка на других путешественников, чтобы следить за их активностью;
- поиск популярных мест для путешествий и просмотр постов с этих мест;
- просмотр ленты других путешественников;

Что касается будущей аудитории социальной сети - у бизнеса есть огромные средства для рекламы и продвижения социальной сети, поэтому пользовательская база будет постепенно линейно расти и через год достигнет примерно 10 000 000 уникальных пользователей в день, после чего также будет продолжать расти. Бизнес пока нацелен  только на аудиторию стран СНГ (на зарубежный рынок выходить планов нет). Будущая система должна быть очень надежной, а также, чтобы с ней было удобно взаимодействовать, используя мобильные устройства и браузер.

## Функциональные требования

- авторизация в приложении
- создание\редактирование\удаление поста с текстом, несколькими картинками и местоположением
- определение местоположения
- лента с постами (поиск постов) (со своими, с постами другого пользователя, общая по нескольким пользователям, по местоположениею или тегам), сортировка ленты
- поиск других путешественников (по имени, тегам, местоположению)
- поиск популярных мест (по количеству уникальных пользователей, по популярным постам)
- подписка на других путешественников
- уведомления о новых постах из подписок
- оставить реакцию
- оставить комментарий

## Нефункциональные требования

- 10 000 000 DAU
- 99.95%
- кроссплатформенность (Мобильные устройства, веб)
- СНГ
- Сезонность (пик летом и в период ногодних каникул)
- Храним всю историю
- Готовое решение для хранилища с картинками
- Авторизация при входе с нового устройства, 2 раза в год
- В посте может быть 2000 символов и до 4 картинок, вес картинки до 500кб
- Пользователь просматривает ленту с операциями 2 раз в день, лента операций показывается батчами по 20 постов, предпоказ фотографии весом 50кб, скорость загрузки до 2секунд
- Пользователь создает 10 постов раз в месяц
- Пользователь ставит реакции 10 раз с день
- Пользователь оставляет комментарий раз в день
- Пользователь ищет интересные места раз в месяц
- Пользователь подписывается на других путешественников 2 раза в месяц
- Запас производительности под увеличение количества пользователей
- Автомасштабирование системы от рпс

## Оценка нагрузки

### Авторизация в приложении
```
RPS = 10 000 000 / 365 / 86 400 = 0.3
```

### Создание поста
```
RPS = 10 000 000 * 10 / 30 / 86 400 =~ 40
Traffic MAX = 40 * (20 000 * 1 + 4 * 500 000) = 80 800 000 =~ 80Mb
Traffic Average = 40 * (20 000 * 1 + 500 000) = 20 800 000 =~ 20Mb
```

### Запрос ленты с постами
```
RPS = 10 000 000 * 2 / 86 400 =~ 230
Traffic Average = 230 * (20 000 + 50 000) * 20 = 322 000 000 =~ 322Mb
```

### Оставление комментария
```
RPS = 10 000 000 * 1 / 86 400 =~ 120
```
  
### Оставление реакции
```
RPS = 10 000 000 * 10 / 86 400 =~ 1200
```

### Подписка на другого пользователя
```
RPS = 10 000 000 * 2 / 30 / 86 400 =~ 10
```
  
### Поиск интересных мест (лента с постами, но по другому фильтру)
```
RPS = 10 000 000 * 1 / 30 / 86 400 =~ 5
Traffic Average = 5 * (20 000 + 50 000) * 20 = 7 000 000 =~ 7Mb
```

Connections = 10 000 000 * 0.1 = 1 000 000
